name: Deploy dev 

on:
  push:
    branches:
      - dev

jobs:
  terraform:
    runs-on: ubuntu-latest
    environment: aws
    
    env:
      AWS_DEFAULT_REGION: us-east-1 
      AWS_ACCESS_KEY_ID: ASIAZI2LEEFLCGV3PKXV
      AWS_SECRET_ACCESS_KEY: O2z4oyifJw9k7d7rJ6MXgWyJHL8vl/RyeXuF6Lkb
aws_session_token=IQoJb3JpZ2luX2VjEMv//////////wEaCXVzLXdlc3QtMiJHMEUCIH66W8xB+4CpWjltH/J1Xsbo62P7EehF37PpnCI9jy0jAiEA9Z9W8EnHge8zQTq42rKg4M/gSp8l+kXfJ1BmMNnp5+4qsAIINBAAGgw2Mzc0MjMzMjk2MjIiDEPdg0t3IU05MFZz5SqNAmanNn+hGvB+ulbIPaE+QV+2nnunijItpE3AbkzSZBTI8NR7lzyC5wn628O6ztPjpdE+dn+0HRq8ty4QsR9aeswsi0mJQ6nXPYOQ+jpbrh8bTUJjZzhSLcR6sMqEUWs9n9YMIM7FBcjU8eE6Ho4WhCG3933ywbHXlE7jgbrXD8XRbENqzOEh+Wq8hffycvixorPtRz+DbWV2d7mksZ56v8XkY7jOgYI4SR6A72+uyb9LpwPfic1UINc2J0edDTWxggbB/FSh7zAZHWv2zY4rkzoF7/2SVLi/muUbY/57V9zC78/0Dg4izEpTgbKBsFZnOx0EH5cGt3s8oPVeAWpEyg2wuQgXkiR8cses7ZUWMMTl+bEGOp0B+XSokzKAZ4SvYcF+5qouT99b3OrL84Iro6/hDEa8KZE97eyQ9kjVL8QBqNY89FYQH+iCO4bgCfu9J0TSbEPN5PgJJpoE3/9XkJmhVdbnzIYeevb87xceFxZIYzJQ+zUfW9emRfIYoJbn8h76toRX3TGK2GRVQNWpwKNTIqpA0iAg8nKNvVsFMUjRCAAfDiXuQ6+ZFD/b5zVxb+KAvw==

    steps:
    - name: Checkout repository
      uses: actions/checkout@v2

    - name: Set up Terraform
      uses: hashicorp/setup-terraform@v1
      with:
        terraform_version: 1.0.0

    - name: Initialize Terraform
      run: terraform init

    - name: Plan Terraform changes
      run: terraform plan -out=tfplan

    - name: Apply Terraform changes
      run: terraform apply --auto-approve

    - name: Clean up
      run: rm tfplan
